machines:
  "0":
    constraints: "arch=amd64"
    series: "xenial"
services:
  prometheus:
    charm: cs:~prometheus-charmers/prometheus-14
    num_units: 1
    series: "xenial"
    to:
      - "0"
  ssl-proxy:
    charm: "{{charm_dir}}/xenial/sojobo-monitoring-proxy"
    num_units: 1
    expose: true
    options:
      monitoring-url: {{sojobo_url}}
      monitoring-api-key: {{api_key}}
      controller: {{controller}}
      model: {{model}}
      credentials: {{credentials}}
    series: "xenial"
    to:
      - "0"
  trusty-node:
    charm: "{{charm_dir}}/trusty/prometheus-node-exporter"
    series: "trusty"
  xenial-node:
    charm: "{{charm_dir}}/xenial/prometheus-node-exporter"
    series: "xenial"
relations:
  - - "prometheus:target"
    - "trusty-node:http"
  - - "prometheus:target"
    - "xenial-node:http"
